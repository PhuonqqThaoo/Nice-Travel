<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/index :: dynamic(~{::main})}" lang="en">

<body>
    <main>
        <!-- box200 -->
        <div class="box-200"></div>
        <!-- pay -->
        <div class="pay pay-container">
                <ol class="breadcrumb">
                    <li><a href="">Đặt tour</a></li>
                    <li><a href="">Nhập thông tin</a></li>
                </ol>

                <!-- left -->
                <div class="col-65-left">
                    <div class="title">
                        <h2>Nhập thông tin</h2>
                    </div>
                    <!-- thông tin liên lạc -->
                    <div class="thong-tin-lien-lac">
                        <h4>Thông tin liên lạc</h4>
                        <p>Đây là thông tin của khách hàng dùng để liên lạc khi đặt chỗ thành công</p>
                    </div>
                    <!-- box thông tin -->
                    <div class="box-thong-tin">
                        <div class="col-12">
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="fullname">Họ và tên</label>
                                    <input type="text" class="form-control" id="fullname" th:value="${account.fullname}">
                                    <div id="accountId" style="display: none">[[${account.id}]]</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="email">Địa chỉ email</label>
                                    <input type="text" id="email" class="form-control" th:value="${account.email}">
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="phone">Số điện thoại</label>
                                    <input type="text" class="form-control" id="phone" th:value="${account.phone}">
<!--                                    <span th:text="${#request.}"></span>-->
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="address">Địa chỉ</label>
                                    <input type="text" class="form-control" id="address" th:value="${account.address}">

                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- pay customer -->
                    <div class="customer">
                        <h3>Hành khách</h3>
                        <div class="col-12">
                            <div class="col-6">
                                <div class="change">
                                    <div class="change-title">
                                        <h4>Người lớn</h4>
                                        <p>&gt; 12 tuổi</p>
                                    </div>
                                    <div class="change-number">
                                        <span class="minus btn-click"><i class="bx bx-minus-circle" id="adultMinus" ng-click="adultMinus()"></i></span>
                                        <span class="number" id="adult">1</span>
                                        <span class="plus btn-click"><i class="bx bx-plus-circle" id="adultPlus" ng-click="adultPlus()"></i></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="change">
                                    <div class="change-title">
                                        <h4>Trẻ em</h4>
                                        <p>Từ 5 - 11 tuổi</p>
                                    </div>
                                    <div class="change-number">
                                        <span class="minus btn-click"><i class="bx bx-minus-circle" id="childrenMinus" ng-click="childrenMinus()"></i></span>
                                        <span class="number" id="children">0</span>
                                        <span class="plus btn-click"><i class="bx bx-plus-circle" id="childrenPlus" ng-click="childrenPlus()"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="col-6">
                                <div class="change">
                                    <div class="change-title">
                                        <h4>Trẻ nhỏ</h4>
                                        <p>Từ 2 - 4 tuổi</p>
                                    </div>
                                    <div class="change-number">
                                        <span class="minus btn-click"><i class="bx bx-minus-circle"
                                                id="smallchildrenMinus" ng-click="smallchildrenMinus()"></i></span>
                                        <span class="number" id="smallchildren">0</span>
                                        <span class="plus btn-click"><i class="bx bx-plus-circle"
                                                id="smallchildrenPlus" ng-click="smallchildrenPlus()"></i></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="change">
                                    <div class="change-title">
                                        <h4>Em bé</h4>
                                        <p>Từ 0 - 2 tuổi</p>
                                    </div>
                                    <div class="change-number">
                                        <span class="minus btn-click"><i class="bx bx-minus-circle"
                                                id="babyMinus" ng-click="babyMinus()"></i></span>
                                        <span class="number" id="baby">0</span>
                                        <span class="plus btn-click"><i class="bx bx-plus-circle"
                                                id="babyPlus" ng-click="babyPlus()"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- right -->
                <div class="col-35-right">
                    <div class="title">
                        <h4>Tóm tắt đặt chỗ</h4>
                    </div>
                    <div class="travel-detail-lich-trinh-time">
                        <h5><i class='bx bxs-timer'></i> Ngày khởi hành</h5>
                        <p>[[${travel.hour}]]:00 - [[${#dates.format(travel.startDate, 'dd-MM-yyyy')}]]</p>
                </div>
                <div class="travel-detail-lich-trinh-time">
                    <h5><i class='bx bxs-timer'></i> Ngày kết thúc</h5>
                    <p>[[${travel.hour}]]:00 - [[${#dates.format(travel.endDate, 'dd-MM-yyyy')}]]</p>
                </div>
                <div class="strikethrough"></div>
                <h5 style="font-weight: 700;">Nơi đến </h5>
                <div class="noi-den">
                    <img th:src="@{|/assets/img/${travel.img}|}" alt="">
                    <div id="travelId" style="display: none">[[${travel.id}]]</div>
                    <div id="qtynew" style="display: none">[[${travel.quantityNew}]]</div>
                    <div>
                        <i class='bx bxs-star'></i>
                        <i class='bx bxs-star'></i>
                        <i class='bx bxs-star'></i>
                        <i class='bx bxs-star'></i>
                        <i class='bx bxs-star'></i>
                    </div>
                    <h5>[[${travel.name}]]</h5>
                </div>
                <div class="detail">
                    <table>
                        <tbody>
                            <tr>
                                <th class="l1">Hành khách</th>
                                <th class="l2 text-right">
                                    <p class="add-more">
                                        <p>{{load.qtyAdult}} người lớn<br>{{load.qtyChildren}} trẻ em<br>{{load.qtySmallchildren}} trẻ nhỏ<br>{{load.qtyBaby}} em bé</p>
                                    </p>
                                </th>
                            </tr>
                            <tr>
                                <td>Người lớn</td>
                                <td class="t-price text-right" id="AdultPrice">{{load.qtyAdult}} x {{[[${travel.price}]] * load.qtyAdult | number}}₫</td>
                            </tr>
                            <tr>
                                <td>Trẻ em</td>
                                <td class="t-price text-right" id="ChildrenPrice">{{load.qtyChildren}} x {{(([[${travel.price}]] - ([[${travel.price}]] * 0.1)) * load.qtyChildren)  | number}}₫</td>
                            </tr>
                            <tr>
                                <td>Trẻ nhỏ</td>
                                <td class="t-price text-right" id="SmallChildrenPrice">{{load.qtySmallchildren}} x {{(([[${travel.price}]] - ([[${travel.price}]] * 0.3)) * load.qtySmallchildren) | number}}₫</td>
                            </tr>
                            <tr>
                                <td>Em bé</td>
                                <td class="t-price text-right" id="BabyPrice">{{load.qtyBaby}} x {{(([[${travel.price}]] - ([[${travel.price}]] * 0.5)) * load.qtyBaby) | number}}₫</td>
                            </tr>
                            <tr class="total">
                                <td>Tổng cộng</td>
                                <td class="t-price text-right" id="TotalPrice"> {{([[${travel.price}]] * load.qtyAdult) + (([[${travel.price}]] - ([[${travel.price}]] * 0.1)) * load.qtyChildren) + (([[${travel.price}]] - ([[${travel.price}]] * 0.3)) * load.qtySmallchildren) + (([[${travel.price}]] - ([[${travel.price}]] * 0.5)) * load.qtyBaby) | number}}₫</td>
                                <div id="total" style="display: none">{{([[${travel.price}]] * load.qtyAdult) + (([[${travel.price}]] - ([[${travel.price}]] * 0.1)) * load.qtyChildren) + (([[${travel.price}]] - ([[${travel.price}]] * 0.3)) * load.qtySmallchildren) + (([[${travel.price}]] - ([[${travel.price}]] * 0.5)) * load.qtyBaby)}}</div>
                            </tr>
                        </tbody>
                    </table>
                    <div>
                        <button class="btn btn-primary btn-order" style="width:100% "  ng-click="booking.purchaser()" >
                            ĐẶT NGAY
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end pay -->
        <!--  gallery home -->
        <section aria-label="gallery">
            <div class="container-fluid m-5-hor">
                <div class="row">

                </div>
            </div>

            <div class="onStep" data-animation="fadeInUp" data-time="0">
                <div id="owl-gal" class="owl-carousel">

                    <div th:each="p: ${items}" class="item">
                        <div class="gal-home travel-box">
                            <a th:href="@{|/travel/detail/${p.slug}|}">
                                <div class="hovereffect">
                                    <img alt="imageportofolio" class="img-responsive"
                                        th:src="@{|/assets/img/${p.img}|}">
                                </div>
                                <div class="gal-home-content travel-box-content">
                                    <p>[[${p.hour}]]:00 - [[${#dates.format(p.startDate, 'dd-MM-yyyy')}]] - [[${#dates.format(p.endDate, 'dd')} - ${#dates.format(p.startDate, 'dd')}]]  ngÃ y  </p>
                                    <h5 style="min-height: 42px;"><a th:href="@{|/travel/detail/${p.slug}|}" th:utext="${p.name}"></a></h5>
                                    <br>
                                    <p>Số lượng: [[${p.quantity}]] Người</p>
                                    <p>Nơi khởi hành:  [[${p.departurePlace}]]</p>
                                    <p>
                                        <h5 style="display: inline-block; color: rgba(238, 82, 83,1.0);">[[${#numbers.formatCurrency(p.price)}]]
                                        </h5> / Người
                                    </p>
                                    <div>
                                        <a th:href="@{|/booking/check?tour=${p.slug}|}" class="travel-btn"><i class='bx bxs-cart-alt'></i> Đặt
                                            ngay</a>
                                            <a href="" class="travel-btn" style="padding: .8rem 1.8rem; background-color: rgb(9, 184, 253);"><i class='bx bxs-heart'></i></a>
                                        <a th:href="@{|/travel/detail/${p.slug}|}" style="float: right;">Xem chi tiết</a>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                 
                </div>
            </div>
        </section>
        <!--  gallery home end -->
	</main>

    <script>
        $('.change-number .plus').click(function () {
            adult = parseInt($("#adult").text());
            children = parseInt($("#children").text());
            smallchildren = parseInt($("#smallchildren").text());
            baby = parseInt($("#baby").text());
            if (adult + children + smallchildren + baby + 1 > parseInt('9')) {
                alert("Số khách tối đa: 9");
                event.preventDefault();
                return false;
            }
        });

        $('.change-number .minus').click(function () {
            adult = parseInt($("#adult").text());
            children = parseInt($("#children").text());
            smallchildren = parseInt($("#smallchildren").text());
            baby = parseInt($("#baby").text());
            if (adult + children + smallchildren + baby - 1 <= 0) {
                alert("Số khách yêu cầu tối thiểu 1");
                event.preventDefault();
                return false;
            }
        });
    </script>
</body>
</html>