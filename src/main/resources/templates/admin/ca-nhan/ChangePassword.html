<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- icon thanh địa chỉ -->
    <link rel="shortcut icon" th:href="@{/assets/img/logoNiceIco.ico}">
    <title>Quản lý | Đổi mật khẩu | Nice Travel</title>
    <link th:href="@{/admin/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/admin/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/admin/css/ruang-admin.min.css}" rel="stylesheet">

    <!-- css customize -->
    <link th:href="@{/admin/css/customer.style.css}" rel="stylesheet">

    <!-- boxicon -->
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
</head>

<body id="page-top">
<div id="wrapper">
    <!-- Sidebar -->
    <ul class="navbar-nav sidebar sidebar-light accordion" id="accordionSidebar">
        <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/admin">
            <div class="sidebar-brand-icon">
                <img th:src="@{/admin/img/logo/logoNice.png}">
            </div>
            <div class="sidebar-brand-text mx-3">Nice Travel</div>
        </a>
        <hr class="sidebar-divider my-0">
        <li class="nav-item">
            <a class="nav-link" href="/admin">
                <i class='bx bxs-home'></i>
                <span>Trang chủ</span></a>
        </li>
        <hr class="sidebar-divider">
        <div class="sidebar-heading">
            Thống kê
        </div>
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseBootstrap"
               aria-expanded="true" aria-controls="collapseBootstrap">
                <i class='bx bxs-dollar-circle'></i>
                <span>Doanh thu</span>
            </a>
            <div id="collapseBootstrap" class="collapse" aria-labelledby="headingBootstrap"
                 data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Doanh thu</h6>
                    <a class="collapse-item" href="alerts.html">Alerts</a>
                    <a class="collapse-item" href="buttons.html">Buttons</a>
                    <a class="collapse-item" href="dropdowns.html">Dropdowns</a>
                    <a class="collapse-item" href="modals.html">Modals</a>
                    <a class="collapse-item" href="popovers.html">Popovers</a>
                    <a class="collapse-item" href="progress-bar.html">Progress Bars</a>
                </div>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTable"
               aria-expanded="true" aria-controls="collapseTable">
                <i class='bx bxs-customize'></i>
                <span>Khách hàng</span>
            </a>
            <div id="collapseTable" class="collapse" aria-labelledby="headingTable" data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Khách hàng</h6>
                    <a class="collapse-item" href="simple-tables.html">Simple Tables</a>
                    <a class="collapse-item" href="datatables.html">DataTables</a>
                </div>
            </div>
        </li>
        <hr class="sidebar-divider">
        <div class="sidebar-heading">
            Quản lý
        </div>
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePage"
               aria-expanded="true" aria-controls="collapsePage">
                <i class='bx bxs-plane-alt'></i>
                <span>Tour du lịch</span>
            </a>
            <div id="collapsePage" class="collapse" aria-labelledby="headingPage" data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Quản lý tour du lịch</h6>
                    <a class="collapse-item" href="/admin/tour-du-lich">Danh sách tour</a>
                </div>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseCustomer"
               aria-expanded="true" aria-controls="collapseCustomer">
                <i class='bx bxs-user-rectangle'></i>
                <span>Khách hàng</span>
            </a>
            <div id="collapseCustomer" class="collapse" aria-labelledby="headingCustomer"
                 data-parent="#collapseCustomer">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Quản lý khách hàng</h6>
                    <a class="collapse-item" href="/admin/thong-tin-khach-hang">Thông tin khách hàng</a>
                </div>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseStaff"
               aria-expanded="true" aria-controls="collapseStaff">
                <i class='bx bxs-user-rectangle'></i>
                <span>Nhân viên</span>
            </a>
            <div id="collapseStaff" class="collapse" aria-labelledby="headingStaff" data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Quản lý nhân viên</h6>
                    <a class="collapse-item" href="/admin/thong-tin-nhan-vien">Thông tin nhân viên</a>
                </div>
            </div>
        </li>

        <!-- cá nhân -->
        <hr class="sidebar-divider">
        <div class="sidebar-heading">
            Cá nhân
        </div>
        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUser"
               aria-expanded="true" aria-controls="collapseUser">
                <i class='bx bxs-user-rectangle'></i>
                <span>Thông tin</span>
            </a>
            <div id="collapseUser" class="collapse" aria-labelledby="headingUser" data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">Thông tin cá nhân</h6>
                    <a class="collapse-item" href="/admin/information-admin">Thông tin cá nhân</a>
                    <a class="collapse-item" href="/admin/edit-information-admin">Thay đổi thông tin</a>
                    <a class="collapse-item" href="/admin/change-password">Đổi mật khẩu</a>
                </div>
            </div>
        </li>
        <hr class="sidebar-divider">
        <div class="version" id="version-ruangadmin"></div>
    </ul>
    <!-- Sidebar -->
    <div id="content-wrapper" class="d-flex flex-column">
        <div id="content">
            <!-- TopBar -->
            <nav class="navbar navbar-expand navbar-light bg-navbar topbar mb-4 static-top">
                <button id="sidebarToggleTop" class="btn btn-link rounded-circle mr-3">
                    <i class="fa fa-bars"></i>
                </button>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item dropdown no-arrow">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="img-profile rounded-circle" th:src="@{${account.getPhotosImagePath()}}"
                                 style="max-width: 60px">
                            <span class="ml-2 d-none d-lg-inline text-white small">[[${#request.remoteUser}]]</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                             aria-labelledby="userDropdown">
                            <a class="dropdown-item" th:href="@{/admin/information-admin}">
                                <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                Thông tin cá nhân
                            </a>
                            <a class="dropdown-item" th:href="@{/admin/change-password}">
                                <i class="bx bxs-lock-open-alt fa-fw mr-2 text-gray-400"></i>
                                Đổi mật khẩu
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0);" data-toggle="modal"
                               data-target="#logoutModal">
                                <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                Đăng xuất
                            </a>
                        </div>
                    </li>
                </ul>
            </nav>
            <!-- Topbar -->

            <!-- Modal Logout -->
            <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog"
                 aria-labelledby="exampleModalLabelLogout" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabelLogout">Ohh Không!</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Bạn có chắc chắn bạn muốn thoát ?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-primary"
                                    data-dismiss="modal">Trở lại
                            </button>
                            <a th:href="@{/logoff}" class="btn btn-primary">Đăng xuất</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Container Fluid-->
            <div class="container-fluid customer-information height-change-password" id="container-wrapper">
                <div class="d-sm-flex justify-content-between mb-4 title">
                    <h1 class="h3 mb-0 text-gray-800">Đổi mật khẩu</h1>
                </div>

                <!-- row info -->
                <div class="information-box">
                    <!-- intro info -->
                    <div class="row box">
                        <div class="col-6">
                            <h5 style="font-weight: 600;">Tài khoản: admin</h5>
                            <p>
                                Việc thay đổi mật khẩu độ khó cao sẽ giúp bạn bảo mật tốt hơn.
                            </p>
                        </div>
                        <div class="col-6">
                            <img src="https://www.gstatic.com/identity/boq/accountsettingsmobile/profile_scene_visible_360x128_18500c161aac04e9279fbb234b7de818.png"
                                 alt="">
                        </div>
                    </div>

                    <!-- edit information -->
                    <div class="row box box-border">
                        <div class="col-6" style="text-align: center; align-items: center;">
                            <i class='bx bxs-shield-alt-2' style="font-size: 300px;"></i>
                        </div>
                        <!--                            <form th:action="@{/change_password}" method="post" id="form" method="POST" class="col-6">-->
                        <!--                                <div th:if="${message != null}" class="m-3">-->
                        <!--                                    <p class="text-danger">[[${message}]]</p>-->
                        <!--                                </div>-->
                        <!--                                <div class="form-group">-->
                        <!--                                    <label><i class='bx bxs-lock-alt'></i> Mật khẩu cũ</label>-->
                        <!--                                    <input type="password" name="oldPassword" class="form-control">-->
                        <!--                                </div>-->
                        <!--                                <div class="form-group">-->
                        <!--                                    <label><i class='bx bxs-lock-open-alt'></i> Mật khẩu mới</label>-->
                        <!--                                    <input type="password" name="newPassword" id="newPassword" class="form-control">-->
                        <!--                                </div>-->
                        <!--                                <div class="form-group">-->
                        <!--                                    <label><i class='bx bx-lock-alt'></i> Nhập lại mật khẩu</label>-->
                        <!--                                    <input type="password" id="password" name="password" required oninput="checkPasswordMatch(this);" class="form-control">-->
                        <!--                                    <div style="margin-top: 20px;">-->
                        <!--                                        <button class="btn btn-primary btn-w-100">Lưu</button>-->
                        <!--                                        <button class="btn btn-light btn-w-100">Reset</button>-->
                        <!--                                    </div>-->
                        <!--                                </div>-->
                        <!--                            </form>-->

                        <form th:action="@{/admin/change-password}" th:object="${userRequest}" method="post"
                              style="max-width: 350px; margin: 0 auto;">
<!--                            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>-->
                            <div class="border border-secondary rounded p-3">
                                <div th:if="${message != null}" class="m-3">
                                    <p class="text-danger">[[${message}]]</p>
                                </div>
                                <div>
                                    <p>
                                        <label>
                                            <input type="password" name="oldPassword" class="form-control"
                                                   placeholder="Old Password" required autofocus/>
                                        </label>
                                    </p>
                                    <p>
                                        <label for="newPassword"></label>
                                        <input type="password" name="newPassword"
                                               id="newPassword" class="form-control"
                                               placeholder="New password" required/>
                                    </p>
                                    <p>
                                        <label>
                                            <input type="password" class="form-control"
                                                   placeholder="Confirm new password"
                                                   required oninput="checkPasswordMatch(this);"/>
                                        </label>
                                    </p>
                                    <p class="text-center">
                                        <input type="submit" value="Change Password" class="btn btn-primary"/>
                                    </p>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- end row info -->
                </div>
            </div>

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                            <span>copyright &copy; <script>
                                    document.write(new Date().getFullYear());
                                </script> - developed by
                                <b><a href="https://indrijunanda.gitlab.io/" target="_blank">indrijunanda</a></b>
                            </span>
                    </div>
                </div>
            </footer>
            <!-- Footer -->
        </div>
    </div>
</div>

<!-- Scroll to top -->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<script th:src="@{/admin/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/admin/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/admin/vendor/jquery-easing/jquery.easing.min.js}"></script>
<script th:src="@{/admin/js/ruang-admin.min.js}"></script>
<script th:src="@{/admin/vendor/chart.js/Chart.min.js}"></script>
<!--   <script th:src="@{/admin/js/demo/chart-area-demo.js}"></script>   -->
<script th:inline="javascript">
    // Set new default font family and font color to mimic Bootstrap's default styling
    Chart.defaults.global.defaultFontFamily = 'Nunito',
        '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
    Chart.defaults.global.defaultFontColor = '#858796';

    function checkPasswordMatch(fieldConfirmPassword) {
        if (fieldConfirmPassword.value != $("#newPassword").val()) {
            fieldConfirmPassword.setCustomValidity("Passwords do not match!");
        } else {
            fieldConfirmPassword.setCustomValidity("");
        }
    }

    function number_format(number, decimals, dec_point, thousands_sep) {
        // *     example: number_format(1234.56, 2, ',', ' ');
        // *     return: '1 234,56'
        number = (number + '').replace(',', '').replace(' ', '');
        var n = !isFinite(+number) ? 0 : +number,
            prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
            sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
            dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
            s = '',
            toFixedFix = function (n, prec) {
                var k = Math.pow(10, prec);
                return '' + Math.round(n * k) / k;
            };
        // Fix for IE parseFloat(0.55).toFixed(0) = 0;
        s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
        if (s[0].length > 3) {
            s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
        }
        if ((s[1] || '').length < prec) {
            s[1] = s[1] || '';
            s[1] += new Array(prec - s[1].length + 1).join('0');
        }
        return s.join(dec);
    }

    /*<![CDATA[*/
    var totalPriceLast6Months = /*[[${chartData}]]*/ 'default';
    /*]]>*/
    var arrayLabels = totalPriceLast6Months[0];
    var arrayData = totalPriceLast6Months[1];
    // Area Chart Example
    var ctx = document.getElementById("myAreaChart");
    var myLineChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: arrayLabels,
            datasets: [{
                label: 'Doanh thu: ',
                lineTension: 0.3,
                backgroundColor: "rgba(78, 115, 223, 0.5)",
                borderColor: "rgba(78, 115, 223, 1)",
                pointRadius: 3,
                pointBackgroundColor: "rgba(78, 115, 223, 1)",
                pointBorderColor: "rgba(78, 115, 223, 1)",
                pointHoverRadius: 3,
                pointHoverBackgroundColor: "rgba(78, 115, 223, 1)",
                pointHoverBorderColor: "rgba(78, 115, 223, 1)",
                pointHitRadius: 10,
                pointBorderWidth: 2,
                data: arrayData,
            }],
        },
        options: {
            maintainAspectRatio: false,
            layout: {
                padding: {
                    left: 10,
                    right: 25,
                    top: 25,
                    bottom: 0
                }
            },
            scales: {
                xAxes: [{
                    time: {
                        unit: 'date'
                    },
                    gridLines: {
                        display: false,
                        drawBorder: false
                    },
                    ticks: {
                        maxTicksLimit: 7
                    }
                }],
                yAxes: [{
                    ticks: {
                        maxTicksLimit: 5,
                        padding: 10,
                        // Include a dollar sign in the ticks
                        callback: function (value, index, values) {
                            return value.toLocaleString("vi-VN", {
                                style: "currency",
                                currency: "VND"
                            });
                            // 	              return number_format(value)+'đ' ;
                        }
                    },
                    gridLines: {
                        color: "rgb(234, 236, 244)",
                        zeroLineColor: "rgb(234, 236, 244)",
                        drawBorder: false,
                        borderDash: [2],
                        zeroLineBorderDash: [2]
                    }
                }],
            },
            legend: {
                display: false
            },
            tooltips: {
                backgroundColor: "rgb(255,255,255)",
                bodyFontColor: "#858796",
                titleMarginBottom: 10,
                titleFontColor: '#6e707e',
                titleFontSize: 14,
                borderColor: '#dddfeb',
                borderWidth: 1,
                xPadding: 15,
                yPadding: 15,
                displayColors: false,
                intersect: false,
                mode: 'index',
                caretPadding: 10,

                callbacks: {
                    label: function (tooltipItem, chart) {
                        var datasetLabel = chart.datasets[tooltipItem.datasetIndex].label || '';
                        return datasetLabel + ':' + number_format(tooltipItem.yLabel) + 'đ';
                    }
                }
            }
        }
    });
</script>
</body>

</html>